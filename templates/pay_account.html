<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Baixa de {{ 'Recebimento' if tipo_conta == 'pagar' else 'Pagamento' }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pay_account.css') }}">
</head>
<body>

    <div class="container">

        <h4 class="mb-4" style="color: white">Baixa de {{ 'Recebimento' if tipo_conta == 'pagar' else 'Pagamento' }}</h4>
        <form method="POST" action="{{ url_for('pay_account', account_id=account.id, tipo_conta=tipo_conta) }}">
            <!-- Cliente e Documento -->
            <div class="card p-3">
                <div class="row g-3">
                    <div class="col-md-2">
                        <label class="form-label">Cliente</label>
                        <input type="text" class="form-control" value="{{ account.id_fornecedor }}" disabled>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Nome</label>
                        <input type="text" class="form-control" value="{{ account.razao_social }}" disabled>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-control text-center" value="{{ account.data_lancamento }}" disabled>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Documento</label>
                        <input type="text" class="form-control" value="" disabled>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Valor</label>
                        <input type="text" class="form-control text-center" value="R$ {{ '%.2f'|format(account.valor)|replace('.',',') }}" disabled>
                    </div>
                </div>
            </div>

            <!-- Parcela -->
            <div class="card p-3">
                <div class="row g-3">
                    <div class="col-md-2">
                        <label class="form-label">Vencimento</label>
                        <input type="date" class="form-control text-center" value="{{ account.data_vencimento }}" disabled>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Nº Parcela</label>
                        <input type="text" class="form-control text-center" value="{{ account.numero_parcela }}" disabled>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Valor da Parcela</label>
                        <input type="text" class="form-control text-center" value="R$ {{ '%.2f'|format(account.valor_parcela)|replace('.',',') }}" disabled>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Juros</label>
                        <input type="text" class="form-control text-center" value="R$ {{ account.juros|replace('.', ',') }}" disabled>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Valor {{ 'Recebido' if tipo_conta == 'receber' else 'Pago' }}</label>
                        <input type="text" class="form-control text-center" value="R$ {{ '%.2f'|format(account.valor_pago)|replace('.',',') }}" disabled>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label fw-bold">Saldo a {{ 'Receber' if tipo_conta == 'receber' else 'Pagar' }}</label>
                        <input type="text" id="saldo_pagar" class="form-control text-danger text-center fw-bold" value="R$ {{ '%.2f'|format(account.valor_a_receber)|replace('.',',') }}" readonly>
                    </div>
                </div>
            </div>

            <!-- Recebimento -->
            <div class="card p-3">
                <div class="row g-3">
                    <div class="col-md-3">
                        <label class="form-label">Tipo de Pagamento</label>
                        <select class="form-select" name="tipo_pagamento">
                            <option selected>Dinheiro</option>
                            <option>Cartão Débito</option>
                            <option>Cartão Crédito</option>
                            <option>Boleto Bancário</option>
                            <option>Pix</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Conta do Recebimento</label>
                        <input type="text" class="form-control" value="Caixa">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Data do {{ 'Recebimento' if tipo_conta == 'receber' else 'Pagamento' }}</label>
                        <input type="date" class="form-control" name="data_recebimento" value="{{ data_atual }}">
                    </div>

                    <div class="col-md-2 offset-md-1">
                        <label class="form-label">Valor da Parcela (=)</label>
                        <input type="text" id="valor_parcela" name="valor_parcela" class="form-control text-center text-danger fw-bold" value="{{ '%.2f'|format(account.valor_parcela)|replace('.',',') }}" readonly>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Desconto (-)</label>
                        <input type="text" id="valor_desconto" name="valor_desconto" class="form-control text-center text-success fw-bold" value="0,00">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Multa (+)</label>
                        <input type="text" id="valor_multa" name="valor_multa" class="form-control text-center text-danger fw-bold" value="0,00">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Juros (+)</label>
                        <input type="text" id="valor_juros" name="valor_juros" class="form-control text-center text-danger fw-bold" value="{{ '%.2f'|format(account.juros)|replace('.',',') }}">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Recebido (=)</label>
                        <input type="text" id="valor_recebido" name="valor_recebido" placeholder="Valor recebido R$" class="form-control text-center text-success fw-bold">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Valor Total (=)</label>
                        <input type="text" id="valor_saldo" name="valor_saldo" class="form-control text-center text-primary fw-bold" style="background-color: #d1e7dd;" readonly>
                    </div>

                    <div class="col-md-12">
                        <label class="form-label">Observação</label>
                        <textarea class="form-control" rows="2" name="observacao"></textarea>
                    </div>
                </div>
                <div class="d-flex gap-4 mt-4">
                    <button type="button" class="btn btn-danger flex-fill" onclick="history.back();">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-success flex-fill">
                        {{ 'Receber' if tipo_conta == 'receber' else 'Pagar' }}
                    </button>
                </div>
            </div>
        </form>
    </div>

<script src="{{ url_for('static', filename='js/pay_account.js') }}"></script>
</body>
</html>
